# 变更流程（让 AI 可持续更新文档）

## 你每次改功能必须做的 4 步
1. 写变更单：`docs/maintenance/changes/YYYY-MM-DD-change-xxx.md`
2. 改代码（前端/后端/管理端）
3. 更新文档：只更新变更单列出的文件（点名路径）
4. 更新 `docs/changelog.md`（一行一条）

## 变更单模板
见：`docs/maintenance/change-template.md`

## AI 提示词模板（复制即用）

### A. 首次重建 docs（一次性）
> 你是我的项目文档工程师。请以代码为准（SSOT），为本仓库生成 docs/ 目录下的文档体系。  
> 规则：事实必须引用代码路径；不确定处标 TODO；不要复述旧文档；避免泄露密钥。  
> 输出：按文件逐个给出“完整内容”，并生成 docs/README.md 导航。

### B. 功能修改后更新 docs（常用）
> 你是我的项目文档维护助手。请基于以下变更单与代码差异，只更新我列出的文档文件。  
> 规则：不确定处标 TODO；禁止编造；保持现有风格；必要时引用代码路径。  
> 输出：逐个文件给出修改后的完整内容；同时给出需要回归的测试点清单。

### C. 文档一致性审计（答辩前）
> 请检查 docs/ 中关于“回收订单状态机”和“管理端筛选条件”的描述是否与代码一致。  
> 输出：不一致列表（文档路径、问题、对应代码位置、建议改法）。

## 推荐最小自动化
- API 参考生成：`python scripts/generate_api_reference.py`
