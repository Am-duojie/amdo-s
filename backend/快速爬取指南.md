# 快速爬取指南

由于网络连接问题，无法直接访问爱回收网站。以下是几种可行的爬取方法：

## 方法一：手动提供商品URL列表（推荐）

### 1. 准备商品URL列表

创建一个文本文件 `urls.txt`，每行一个商品URL：

```
https://m.aihuishou.com/n/ofn/strict-selected/product/detail?saleGoodsNo=20251130153758487586
https://m.aihuishou.com/n/ofn/strict-selected/product/detail?saleGoodsNo=xxx
https://m.aihuishou.com/n/ofn/strict-selected/product/detail?saleGoodsNo=yyy
```

### 2. 使用Playwright爬取

```bash
# 读取URL列表并爬取
python -c "
from pathlib import Path
import subprocess

urls = Path('urls.txt').read_text(encoding='utf-8').strip().split('\n')
urls = [u.strip() for u in urls if u.strip()]

for url in urls:
    print(f'爬取: {url}')
    subprocess.run([
        'python', 'manage.py', 'crawl_aihuishou_full',
        '--url', url,
        '--out', f'data/aihuishou_{url.split(\"saleGoodsNo=\")[-1]}.json'
    ])
"
```

### 3. 导入所有数据

```bash
# 导入所有JSON文件
for file in data/aihuishou_*.json; do
    python manage.py import_aihuishou_full --file "$file" --username aihuishou --download-images
done
```

## 方法二：在浏览器中手动提取数据

### 1. 打开商品详情页

在浏览器中打开爱回收商品详情页

### 2. 运行提取脚本

按 `F12` 打开控制台，运行以下脚本：

```javascript
// 提取商品数据
const data = {
    title: document.querySelector('h1')?.textContent?.trim() || '',
    price: 0,
    images: [],
    // ... 其他字段
};

// 提取价格
const priceText = document.body.textContent;
const priceMatch = priceText.match(/[￥¥]\s*(\d+(?:,\d{3})*(?:\.\d+)?)/);
if (priceMatch) {
    data.price = parseFloat(priceMatch[1].replace(/,/g, ''));
}

// 提取图片
document.querySelectorAll('img').forEach(img => {
    if (img.src && img.src.length > 50 && !img.src.includes('logo')) {
        data.images.push(img.src);
    }
});

// 输出JSON
console.log(JSON.stringify(data, null, 2));
```

### 3. 保存并导入

将控制台输出的JSON保存到文件，然后导入：

```bash
python manage.py import_from_browser --file "data/manual.json" --username aihuishou
```

## 方法三：使用示例数据

如果无法访问网站，可以使用示例数据：

```bash
# 使用示例数据
python manage.py import_aihuishou_full --file "data/aihuishou_example.json" --username aihuishou --download-images

# 为商品创建占位图片
python manage.py download_verified_images --username aihuishou
```

## 已导入的商品

当前已成功导入以下商品：
- 苹果 iPhone 14 Pro 256G 暗紫色
- 华为 Mate 60 Pro 512GB 羽砂紫
- Apple MacBook Air M2 13英寸

所有商品都已创建占位图片，可以在前端页面查看。

## 下一步

1. 如果能够访问爱回收网站，使用方法一或方法二获取真实数据
2. 如果无法访问，可以修改 `data/aihuishou_example.json` 添加更多商品数据
3. 查看前端页面：http://localhost:5173/verified-products

