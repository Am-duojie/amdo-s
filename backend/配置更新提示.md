# ⚠️ 配置更新提示

## 您已手动启动前端 ngrok 隧道

现在需要更新 `backend/core/settings.py` 中的 `FRONTEND_URL` 配置。

## 快速更新步骤

### 1. 获取前端 ngrok 地址

在启动前端 ngrok 的终端窗口中，找到类似以下的信息：

```
Forwarding  https://xxxx-xxxx-xxxx-xxxx.ngrok-free.app -> http://localhost:5173
```

**复制这个地址**：`https://xxxx-xxxx-xxxx-xxxx.ngrok-free.app`

### 2. 更新 settings.py

打开 `backend/core/settings.py`，找到第 280 行左右：

```python
FRONTEND_URL = 'http://localhost:5173'  # 前端地址（本地）
```

**修改为**：

```python
FRONTEND_URL = 'https://xxxx-xxxx-xxxx-xxxx.ngrok-free.app'  # 替换为您的前端 ngrok 地址
```

### 3. 重启 Django 服务（如果正在运行）

在运行 Django 的终端按 `Ctrl+C` 停止，然后重新启动：

```powershell
python manage.py runserver
```

## 配置后的效果

- ✅ 支付完成后，支付宝会直接跳转到前端 ngrok 地址
- ✅ 无需经过后端重定向页面，体验更流畅
- ✅ 避免 ngrok 警告页面干扰

## 验证配置

1. 访问前端 ngrok 地址，确认页面正常加载
2. 创建订单并支付
3. 支付完成后应该自动跳转回前端

## 详细说明

请查看 `backend/UPDATE_FRONTEND_NGROK.md` 获取完整配置指南。








